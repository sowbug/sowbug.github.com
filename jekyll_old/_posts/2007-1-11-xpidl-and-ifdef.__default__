--- 
title: "xpidl and #ifdef"
mt_id: 278
layout: post
date: 2007-01-11 13:24:09 +00:00
---
You may be surprised to find that the Mozilla xpidl compiler doesn't support #ifdef, which seems to be the right way to conditionally define members in your IDL files. So how are you supposed to define debug-only stuff, for example?

Turns out it's quite possible through a flexible passthrough mechanism. Just wrap your C++-isms in blocks like this:

<pre>%{C++
#ifdef DEBUG
%}
    readonly attribute long myDebugStuff;
%{C++
#endif
%}
</pre>

This will appear as expected in the generated .h file. Thanks, <a href="http://weblogs.mozillazine.org/darin/">Darin</a>, for the tip!

<b>Update 2/22/2007: This is just enough rope to hang yourself. Be careful about mismatches between the caller and callee's understanding of the vtable layout!</b>
