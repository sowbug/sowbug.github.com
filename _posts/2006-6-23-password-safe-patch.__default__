--- 
title: Password Safe patch
mt_id: 248
layout: post
date: 2006-06-23 11:43:50 +00:00
---
I've been using <a href="http://passwordsafe.sourceforge.net/">Password Safe</a> for years. It's a little Windows application I keep on my USB drive that contains all my passwords encrypted with a very long Diceware-generated password.

There's one usability problem with Password Safe that's plagued me over the years. I keep backups of the password file on nearly every computer I use, and occasionally I need to get a password but I don't have my USB drive handy. So I open the backup on the local machine, get the password I need, and get on with my life.

The problem is that Password Safe remembers the location of the last file you opened, and tries to open it automatically for you next time. So the next time I add or edit a new password on that machine, I might not notice that I'm opening  the backup file rather than the original on my USB drive. If that happens, I edit the backup file, not the original. Then next time I back up the original onto that machine, my edits are gone. Since the edits always consist of unguessable passwords, I end up locked out of a site, possibly forever.

Here's a patch to version 1.92c that fixes this problem by not remembering backup file locations:

diff -E -w -r pwsafe-1.9.2c-src/DboxMain.cpp pwsafe-1.9.2c-mt-src/DboxMain.cpp
845a846
>    if (0 != m_currfile.Right(4).Compare(".bak")) {
854a856
>    }

I also edited PasswordSafe.rc to change all instances of 1.92c to 1.92c-mt in order to distinguish the modified build. I would provide a compiled binary, but I'm sure you're too smart to store your passwords in a random program downloaded off a shady poker player's website, so you get to build it yourself.

By the way, Password Safe is up to version 3. Unfortunately, it's not backward-compatible with my old files, so I don't use it. When I get around to it, I'll submit a patch to the developers for v3.
